(window.webpackJsonpunifiNetworkUi=window.webpackJsonpunifiNetworkUi||[]).push([[48],{1802:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(70),r=a(2),l=a(8),o=a(529),s=a(282),E=a(18),_=a(50),d=a(145),m=a(1938),u=a(27),I=a(16),O=a(44),A=a(828),T=a(3),S=a(6);const p=(e,t)=>Object(S.q)("radioAiStats","/api/s/{site}/stat/widget/radio-ai-data",e,{idField:({frequency:e,radio:t})=>e+t,...t});var b,h=a(20),N=Object(S.A)(p()),g=function(e){return function(t){return Object(h.a)(N(t),"data",[]).filter((function(t){return t.frequency===e})).some((function(e){return e.scan_data_available}))}},C=g("daily"),f=g("weekly"),D=a(55);!function(e){e.DAILY="daily",e.WEEKLY="weekly"}(b||(b={}));var L=a(23),F=a(48);const M=[{label:"SETTINGS_WIFI_AI_DAILY_VALUE",value:b.DAILY},{label:"SETTINGS_WIFI_AI_WEEKLY_VALUE",value:b.WEEKLY}],j=e=>{var t;return"*"===(null===(t=null==e?void 0:e.split(" "))||void 0===t?void 0:t[4])?b.DAILY:b.WEEKLY},v=(e,t)=>"string"==typeof e||t?e:e%12,w=e=>e.filter(({conf_source:e,run_id:t,status:a})=>!!t&&("radio-ai"===e&&"historical"===a||"manual"===e)),x=(e,t)=>{if(e.date&&t.date){const[a,n]=[e,t].map(e=>new Date(e.date));return Object(L.isBefore)(a,n)?t.date:e.date}return e.date||t.date},R=(e,t)=>{if(void 0===e.satisfaction)return t.satisfaction||0;if(void 0===t.satisfaction)return e.satisfaction||0;const a=(e.satisfaction*e.num_sta+t.satisfaction*t.num_sta)/(t.num_sta+e.num_sta);return Math.round(a)},G=e=>Object(h.a)(e,"radio_table",[]),y=(e,t)=>[...G(e),...G(t)].reduce((e,{device_mac:t})=>e.add(t),new Set).size,W=(...e)=>{const t=e.map(e=>Object(h.a)(e,"calculation_time",0)).reduce((e,t)=>e+t,0);return t<1?0:t/1e3},P=e=>{const{na:t={},ng:a={}}=e.scans;return{...e,date:x(t,a),satisfaction:R(t,a),accessPoints:y(t,a),calculationTime:W(t,a)}},U=(e,t)=>{const[a,n]=[e.date,t.date].map(e=>new Date(e).getTime());return n-a},Y=(e,t,a)=>{let n=G(e.scans[t]);a&&(n=n.filter(({device_mac:e})=>!a.includes(e)));const i=n.reduce((e,t)=>e.add(t.channel),new Set);return Array.from(i)},k=(e,t,a)=>{const n=Y(e,a,((e,t)=>Object(h.a)(e,t+".exclude_devices",null))(t.scans,a)),i=Y(t,a);return n.filter(e=>!i.includes(e))},B=(e,t)=>t?{...e,change:e.satisfaction-t.satisfaction,fiveGChanges:k(e,t,D.b.NA),twoGChanges:k(e,t,D.b.NG)}:{...e,change:0,fiveGChanges:[],twoGChanges:[]},V=(e,t,a)=>{const n=a[t+1];return B(e,n)},H=Object(F.compose)(e=>e.map(P).sort(U).map(V),e=>{const t=e.reduce((e,t)=>(e[t.run_id]={...e[t.run_id],[t.radio]:t},e),{});return Object.entries(t).map(([e,t])=>({id:e,scans:t}))},e=>e.map(e=>({...e,satisfaction:Math.round(e.satisfaction)})),w);var z=a(5),$=a(228),X=a.n($),Z=a(1736),q=a(1739),K=a(32),J=a(1851),Q=a(1737),ee=a(1133),te=a(790),ae=a(785),ne=a(322),ie=a(61),ce=a(46),re=a(664);const le=Object(z.c)(Z.a)`
  flex-direction: column;

  table th {
    // lower the header padding but don't overwrite it for two last headers - column filters and the placeholder header for hover content
    &:not(:last-child):not(:nth-last-child(2)) {
      padding-right: ${({theme:e})=>e.spacing["spacing-s"]} !important;
    }
  }
`;var oe=e=>i.a.createElement(le,Object.assign({},e));const se=Object(z.c)(K.a,{shouldForwardProp:e=>"marginBottom"!==e})`
  color: ${({theme:e})=>e.motifPalette.text01} !important;
  margin-top: ${({theme:e})=>e.spacing["spacing-xxxxxl"]} !important;
  ${({theme:e,marginBottom:t})=>t?`margin-bottom: ${e.spacing["spacing-"+t]} !important;`:""}
`;var Ee=e=>i.a.createElement(se,Object.assign({weight:"bold"},e)),_e=a(4),de=a(1179);const me=Object(_e.a)(T.selectAdoptedApDevices,A.selectChannelPlansData,(e,t)=>{const a=e.filter(({state:e})=>e===T.DEVICE_STATE_IDS.CONNECTED||e===T.DEVICE_STATE_IDS.PROVISIONING).filter(e=>(Object(T.isAp)(e)||Object(T.isUdmBase)(e))&&!Object(de.a)(e.radio_table)),n=(e=>w(e).sort((e,t)=>-1*U(e,t)).map(({date:e,radio_table:t})=>({date:e,macs:[...t.reduce((e,t)=>e.add(t.device_mac),new Set)]})).reduce((e,{date:t,macs:a})=>(a.forEach(a=>{e[a]=t}),e),{}))(t);return a.map(e=>{const{vap_table:t,mac:a}=e;return{...e,numOfSsid:t&&t.length?(i=t,i.map(({id:e})=>e).reduce((e,t)=>e.add(t),new Set).size):0,lastRun:n[a]||0};var i})}),ue=Object(_e.a)(A.selectChannelPlansData,e=>{const t=H(e);return[((e,t)=>{const a=t.filter(({conf_source:e,status:t})=>"radio-ai"===e&&"active"===t);if(!a.length)return null;const n=P({id:void 0,scans:{ng:a.find(e=>"ng"===e.radio),na:a.find(e=>"na"===e.radio)}}),i=e[0];return{...B(n,i),satisfaction:"active",id:"active"}})(t,e),...t].filter(Boolean)}),Ie=e=>e.settings.wiFiAi.wiFiAiScanInProgress,Oe=Object(z.c)(Z.a)`
  flex-direction: column;
`;var Ae=Object(r.f)(({intl:e})=>{const{initialValues:t,setFieldValue:a,values:c}=Object(O.e)(),E=Object(l.useSelector)(s.e),_=Object(l.useSelector)(s.g),d=Object(l.useSelector)(s.h),m=Object(l.useSelector)(me),[u,I]=Object(n.useState)(X()());Object(n.useEffect)(()=>{Object(o.a)(t,c)&&I(X()())},[t,c]);const A=Object(n.useMemo)(()=>_.map(t=>({label:e.formatMessage({id:E.includes(t)?"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_CHANNELS_CHANNEL_DFS":"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_CHANNELS_CHANNEL"},{channel:t}),value:String(t)})),[E,_,e]),S=Object(n.useMemo)(()=>d.map(t=>({label:e.formatMessage({id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_CHANNELS_CHANNEL"},{channel:t}),value:String(t)})),[d,e]),p=Object(n.useMemo)(()=>[{compare:Object(ie.a)(e=>Object(ce.c)(e)||Object(ce.a)(e)),id:"wi-fi-ai-advanced-exclude-access-points-name",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_ACCESS_POINTS_TABLE_NAME"}),renderCell:e=>i.a.createElement(ae.a,{defaultName:Object(ce.a)(e),device:e}),sortable:!0,minWidth:130},{compare:Object(ie.a)(e=>Object(ce.a)(e)),id:"wi-fi-ai-advanced-exclude-access-points-model",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_ACCESS_POINTS_TABLE_MODEL"}),renderCell:e=>Object(ce.a)(e),sortable:!0,minWidth:110,maxWidth:130},{compare:Object(ie.a)(e=>Object(T.getDeviceIp)(e)),id:"wi-fi-ai-advanced-exclude-access-points-ip-address",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_ACCESS_POINTS_TABLE_IP_ADDRESS"}),renderCell:e=>Object(T.getDeviceIp)(e),sortable:!0,minWidth:100,maxWidth:120},{compare:Object(ie.a)(({uptime:e})=>e?Object(re.a)(e):""),id:"wi-fi-ai-advanced-exclude-access-points-uptime",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_ACCESS_POINTS_TABLE_UPTIME"}),renderCell:({uptime:e})=>e?Object(re.a)(e):"",sortable:!0,minWidth:100},{compare:Object(ie.a)(({numOfSsid:e})=>e),id:"wi-fi-ai-advanced-exclude-access-points-ssids",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_ACCESS_POINTS_TABLE_SSIDS"}),renderCell:({numOfSsid:e})=>e,sortable:!0,minWidth:50},{compare:Object(ie.a)(({lastRun:e})=>new Date(e)),id:"wi-fi-ai-advanced-exclude-access-points-last-run",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_ACCESS_POINTS_TABLE_LAST_RUN"}),renderCell:({lastRun:e})=>e?i.a.createElement("div",null,i.a.createElement(te.b,{date:e})):"",sortable:!0,minWidth:100}],[]),b=Object(n.useCallback)((e,t)=>a("wiFiAi.excludedChannelsNa",t.sort((e,t)=>e-t)),[a]),h=Object(n.useCallback)((e,t)=>{a("wiFiAi.excludedChannelsNg",t.sort((e,t)=>e-t))},[a]),N=Object(n.useCallback)(e=>a("wiFiAi.exclude_devices",[...e]),[a]),g=Object(n.useCallback)(()=>i.a.createElement(q.a,{padding:"none"},i.a.createElement(Oe,null,i.a.createElement(Ee,null,i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_ACCESS_POINTS_LABEL"})),i.a.createElement(K.a,null,i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_ACCESS_POINTS_DESCRIPTION"}))),i.a.createElement(oe,null,i.a.createElement(J.a,{columns:p,idField:"mac",initialSelectedIds:t.wiFiAi.exclude_devices||[],items:m,key:u,multiSelectMode:!0,onChangeSelection:N})),i.a.createElement(Z.a,null,i.a.createElement(ne.SearchableGridLabel,{alignWith:"dropdown",htmlFor:"exclude-2-ghz-channels",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_2.4GHZ_CHANNELS_LABEL"}),searchTags:["WIFI_AI","WI_FI_AI"]}),i.a.createElement(Q.a,null,i.a.createElement(ee.a,{multi:!0,options:S,placeholder:e.formatMessage({id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_CHANNELS_SELECTED"},{count:c.wiFiAi.excludedChannelsNg.length}),value:c.wiFiAi.excludedChannelsNg,onChange:h}))),i.a.createElement(Z.a,null,i.a.createElement(ne.SearchableGridLabel,{alignWith:"dropdown",htmlFor:"exclude-5-ghz-channels",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_5GHZ_CHANNELS_LABEL"}),searchTags:["WIFI_AI","WI_FI_AI"]}),i.a.createElement(Q.a,null,i.a.createElement(ee.a,{multi:!0,options:A,placeholder:e.formatMessage({id:"SETTINGS_WIFI_AI_FORM_ADVANCED_EXCLUDE_CHANNELS_SELECTED"},{count:c.wiFiAi.excludedChannelsNa.length}),value:c.wiFiAi.excludedChannelsNa,onChange:b})))),[A,S,p,m,u,t.wiFiAi.exclude_devices,e,c.wiFiAi.excludedChannelsNa,c.wiFiAi.excludedChannelsNg,b,h,N]);return i.a.createElement(q.a,{padding:"none"},i.a.createElement(Z.a,{unlimitedWidth:!0},i.a.createElement(ne.SearchableAccordion,{items:[{id:"advanced",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_ADVANCED_ACCORDION_LABEL"}),renderContent:g}],variant:"secondary"})))}),Te=a(2900),Se=a(2933),pe=a(1172),be=a(45),he=a(71),Ne=a(159);const ge={position:"top",width:"130px"},Ce=Object(z.c)(he.g)`
  font-size: ${({theme:e})=>e.fontSize["font-size-s"]};
`,fe=Object(z.c)(he.g)`
  &:not(:last-child) {
    padding-bottom: ${({theme:e})=>e.spacing["spacing-xs"]};
  }
`,De=Object(z.c)("span")`
  font-size: ${({theme:e})=>e.fontSize["font-size-s"]};
`;var Le=({date:e,experience:t=0,...a})=>i.a.createElement(pe.a,Object.assign({message:i.a.createElement(Ce,{flexDirection:"column"},i.a.createElement(fe,{justifyContent:"space-between"},i.a.createElement(r.c,{id:"SETTINGS_WIFI_LAST_SCANS_TOOLTIP_DAY"}),i.a.createElement(te.a,{date:e})),i.a.createElement(fe,{justifyContent:"space-between"},i.a.createElement(r.c,{id:"SETTINGS_WIFI_LAST_SCANS_TOOLTIP_TIME"}),i.a.createElement(te.d,{date:e})),i.a.createElement(fe,{justifyContent:"space-between"},i.a.createElement(r.c,{id:"SETTINGS_WIFI_LAST_SCANS_TOOLTIP_WIFI_EXP"}),i.a.createElement(De,{style:{color:be.a["color-"+Object(Ne.c)(t)]}},t,"%"))),tooltipProps:ge},a));const Fe=[{label:"100",value:100},{label:"75",value:75},{label:"50",value:50},{label:"25",value:25},{label:"0",value:0}],Me=(e,t)=>{const a=t.filter(({satisfaction:e})=>"number"==typeof e).slice(0,30).reverse();return[...Array.from({length:e-a.length}),...a].map((e,t)=>e?{entry:e,x:t,y:e.satisfaction}:void 0).filter(Boolean)},je=Object(_e.a)(ue,e=>{return{xAxis:(t=30,Array.from({length:t}).map((e,a)=>({value:a,label:t-a}))),data:Me(30,e)};var t}),ve=Object(z.c)("div")`
  position: relative;
  width: 100%;
`,we=Object(z.c)(Z.a)`
  flex-direction: column;
`;var xe=()=>{const e=Object(n.useRef)(null),t=Object(n.useRef)(null),{xAxis:a,data:o}=Object(l.useSelector)(je),s=Object(c.m)(),E=Object(c.p)(e)||800,_=Object(n.useCallback)(({x:e,y:t,...a})=>{const{entry:{date:n}}=o.find(({x:t})=>t===e)||{entry:{date:""}};return i.a.createElement(Le,Object.assign({},a,{date:n,experience:t,hidden:!1,topMargin:parseInt(s.spacing["spacing-xs"],10)}))},[o,s]),d=Object(n.useCallback)((e,a,n)=>o.length?i.a.createElement(Te.a,{dashed:!1,data:o,getCoordinates:e,interpolation:"linear",maxY:n,mouseData:a,renderTooltip:_,showDots:!0,tooltipPortal:t.current,variant:"gradientArea"}):null,[o,_]);return i.a.createElement(q.a,{padding:"none"},i.a.createElement(we,null,i.a.createElement(Ee,{marginBottom:"l"},i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_CHART_LABEL"})),i.a.createElement(ve,{innerRef:e},i.a.createElement(Se.a,{height:152,renderChartElements:d,width:E,xAxis:a,yAxis:Fe}),i.a.createElement("div",{ref:t}))))},Re=a(445),Ge=a(15),ye=a(821),We=a(645),Pe=a(830),Ue=a(62),Ye=a(1100);const ke=Object(z.c)(Ge.d)`
  color: ${({theme:e})=>e.motifPalette.warning};
`,Be=Object(z.c)(he.g,{shouldForwardProp:e=>"showWeekDaySelector"!==e})`
  > * {
    flex: 1;

    &:first-child {
      flex: ${({showWeekDaySelector:e})=>e?2:1};
    }
  }

  > :not(:last-child) {
    margin-right: ${({theme:e})=>e.spacing["spacing-m"]};
  }
`,Ve=Object(z.c)(he.g)`
  margin-bottom: -${({theme:e})=>e.spacing["spacing-xs"]};
  margin-top: -${({theme:e})=>e.spacing["spacing-xs"]};
`,He=Object(z.c)(Re.a)`
  margin-left: ${({theme:e})=>e.spacing["spacing-l"]};
  margin-top: 1px;
`,ze=Object(z.c)("div")`
  margin-bottom: ${({theme:e})=>e.spacing["spacing-xxxl"]};
  padding: 16px 24px;
  border: 1px solid ${({theme:e})=>e.motifPalette.ui04};
  line-height: 1.5;
  max-width: 601px;
  width: 100%;
`,$e=Object(z.c)(Ge.W)`
  margin-right: ${({theme:e})=>e.spacing["spacing-m"]};
`,Xe=Object(z.c)("ul")`
  margin: 4px 0;
  padding-left: 52px;
`;var Ze=()=>{const e=Object(l.useDispatch)(),t=Object(l.useSelector)(C),a=Object(l.useSelector)(f),c=Object(l.useSelector)(Ie),o=Object(l.useSelector)(E.O),{values:s}=Object(O.e)(),_=Object(n.useCallback)(()=>{e(Object(Ye.c)(!0)),e(Object(We.scanNowRadioAi)()).finally(()=>Object(Ye.c)(!1))},[e]),d=!(b.WEEKLY===s.wiFiAi.frequency?a:t);return i.a.createElement(q.a,{padding:"none"},i.a.createElement(Z.a,null,i.a.createElement(ne.SearchableGridLabel,{alignWith:"toggleSmall",htmlFor:"wiFiAi.enabled",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_FIELD_ENABLED_LABEL"}),searchTags:["WIFI"],searchText:"SETTINGS_WIFI_AI_FORM_FIELD_ENABLED_SEARCH_TEXT"}),i.a.createElement(Q.a,null,i.a.createElement(Ue.Field,{name:"wiFiAi.enabled",type:"checkbox"}),d&&i.a.createElement(He,{message:i.a.createElement(K.a,null,i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_FIELD_ENABLED_WARNING_TOOLTIP"})),position:"bottom",width:300},i.a.createElement(ke,{size:"large"})),i.a.createElement(Ve,{flex:"1",justifyContent:"flex-end"},i.a.createElement(he.c,{disabled:d||c,legacy:!1,name:"wi-fi-ai-scan-now",type:"button",variant:"primary",onClick:_},i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_BUTTON_SCAN_NOW"}))))),i.a.createElement(Z.a,null,i.a.createElement(ne.SearchableGridLabel,{alignWith:"toggleSmall",htmlFor:"networkOptimize.enabled",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_FIELD_AUTO_OPTIMIZE"}),description:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_FIELD_AUTO_OPTIMIZE_DESCRIPTION"})}),i.a.createElement(Q.a,null,i.a.createElement(Ue.Field,{name:"networkOptimize.enabled",type:"checkbox"}))),i.a.createElement(Z.a,null,i.a.createElement(ze,null,i.a.createElement(he.g,null,i.a.createElement($e,{isActive:!0}),i.a.createElement(K.a,{color:"tertiary"},i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_FIELD_AUTO_OPTIMIZE_INFO_INTRO"}))),i.a.createElement(Xe,null,i.a.createElement("li",null,i.a.createElement(K.a,{color:"tertiary"},i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_FIELD_AUTO_OPTIMIZE_INFO_1"}))),i.a.createElement("li",null,i.a.createElement(K.a,{color:"tertiary"},i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_FIELD_AUTO_OPTIMIZE_INFO_2"})))))),i.a.createElement(Z.a,null,i.a.createElement(ne.SearchableGridLabel,{alignWith:"input",htmlFor:"wiFiAi.frequency",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_FIELD_FREQUENCY_LABEL"}),searchTags:["WIFI"],searchText:"SETTINGS_WIFI_AI_FORM_FIELD_FREQUENCY_SEARCH_TEXT"}),i.a.createElement(Q.a,null,i.a.createElement(Ue.Field,{full:!0,name:"wiFiAi.frequency",options:M,translateOptions:!0,type:"dropdown"}))),i.a.createElement(Z.a,null,i.a.createElement(ne.SearchableGridLabel,{alignWith:"input",htmlFor:s.wiFiAi.frequency===b.WEEKLY?"wiFiAi.dayOfWeek":"wiFiAi.hour",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_FIELD_SCAN_TIME_LABEL"}),searchTags:["WIFI"],searchText:"SETTINGS_WIFI_AI_FORM_FIELD_SCAN_TIME_SEARCH_TEXT"}),i.a.createElement(Q.a,null,i.a.createElement(Be,{flex:"1",showWeekDaySelector:s.wiFiAi.frequency===b.WEEKLY},s.wiFiAi.frequency===b.WEEKLY&&i.a.createElement(Ue.Field,{type:"dropdown",translateOptions:!0,name:"wiFiAi.dayOfWeek",full:!0,options:ye.a}),o?i.a.createElement(Ue.Field,{type:"dropdown",name:"wiFiAi.hour",full:!0,options:Pe.j}):i.a.createElement(Ue.Field,{type:"dropdown",name:"wiFiAi.hour",full:!0,options:Pe.i}),i.a.createElement(Ue.Field,{type:"dropdown",name:"wiFiAi.minute",full:!0,options:Pe.f}),!o&&i.a.createElement(Ue.Field,{type:"dropdown",translateOptions:!0,name:"wiFiAi.amOrPm",full:!0,options:Pe.b})))))},qe=a(65),Ke=a(151),Je=a(526),Qe=a(28);const et=Object(z.c)(he.g)`
  padding-bottom: ${({theme:e})=>e.spacing["spacing-xs"]};
  padding-top: ${({theme:e})=>e.spacing["spacing-xs"]};
`,tt=Object(z.c)("div")`
  visibility: hidden;

  &::before {
    content: '\\00a0';
    display: block;
  }
`;var at=({displayedValues:e=[],placeholderCount:t=1,placeholderOnTop:a=!1})=>{const n=[...new Array(t)].map((e,t)=>i.a.createElement(tt,{key:t}));return i.a.createElement(et,{flexDirection:"column"},a&&n,e&&e.length?e.map((e,t)=>i.a.createElement("div",{key:`${e}-${t}`},e)):i.a.createElement("div",null,"-"),!a&&n)};const nt=(e,t)=>t.filter(({device_mac:t})=>t===e).reduce((e,{channel:t,twoG:a,tx_power:n,tx_power_mode:i,width:c})=>((a?e.twoGChannels:e.fiveGChannels).push(t),e.channelWidth.push({twoG:a,value:c}),e.txPower.push({twoG:a,value:n}),e.txPowerMode.push({twoG:a,value:i}),e),{twoGChannels:[],fiveGChannels:[],channelWidth:[],txPower:[],txPowerMode:[]}),it=(e,t)=>{if(!e||!e.scans)return[];const{na:a,ng:n}=e.scans,i=((e,t)=>{const[a,n]=[e,t].map(e=>Object(h.a)(e,"radio_table",[]));return[...n.map(e=>({...e,twoG:!0})),...a]})(a,n);return((e,t)=>[...[e,t].map(e=>Object(h.a)(e,"radio_table",[])).reduce((e,t)=>[...e,...t]).map(({device_mac:e})=>e).reduce((e,t)=>e.add(t),new Set)])(a,n).map(e=>({device:t.find(({mac:t})=>e===t),mac:e,...nt(e,i)}))},ct=Object(_e.a)(T.selectAdoptedDevices,e=>t=>it(t,e)),rt=Object(z.c)(Ge.B)`
  margin-right: ${({theme:e})=>e.spacing["spacing-s"]};
`;var lt=Object(r.f)(({activeOptimizationLogDetails:e,intl:t,setActiveOptimizationLogDetails:a})=>{const c=Object(n.useRef)(e),o=e||c.current||{date:void 0,id:void 0},{date:s,id:_}=o,d=Object(l.useDispatch)(),m=Object(l.useSelector)(E.M),I=Object(l.useSelector)(ct)(o),[O,T]=Object(n.useState)(!1),S=Object(n.useMemo)(()=>[{id:"plan-detail-device",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_TABLE_DEVICE"}),renderCell:({device:e,mac:t})=>e?i.a.createElement(ae.a,{device:e}):t},{id:"plan-detail-two-g-channels",label:i.a.createElement(r.b,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_TABLE_TWO_G_CHANNELS"}),renderCell:({fiveGChannels:e,twoGChannels:t})=>i.a.createElement(at,{displayedValues:t,placeholderCount:e&&e.length||1})},{id:"plan-detail-five-g-channels",label:i.a.createElement(r.b,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_TABLE_FIVE_G_CHANNELS"}),renderCell:({fiveGChannels:e,twoGChannels:t})=>i.a.createElement(at,{displayedValues:e,placeholderCount:t&&t.length||1,placeholderOnTop:!0})},{id:"plan-detail-channel-width",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_TABLE_CHANNEL_WIDTH"}),renderCell:({channelWidth:e})=>i.a.createElement(at,{displayedValues:e.map(({twoG:e,value:a})=>t.formatMessage({id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_VALUE_TX_POWER"},{twoG:String(!!e),value:a})),placeholderOnTop:e.every(({twoG:e})=>!e),placeholderCount:e.every(({twoG:e})=>e)||e.every(({twoG:e})=>!e)?1:0})},{id:"plan-detail-tx-power",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_TABLE_TX_POWER"}),renderCell:({txPower:e})=>i.a.createElement(at,{displayedValues:e.map(({twoG:e,value:a})=>t.formatMessage({id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_VALUE_TX_POWER"},{twoG:String(!!e),value:a})),placeholderOnTop:e.every(({twoG:e})=>!e),placeholderCount:e.every(({twoG:e})=>e)||e.every(({twoG:e})=>!e)?1:0})},{id:"plan-detail-tx-power-mode",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_TABLE_TX_POWER_MODE"}),renderCell:({txPowerMode:e})=>i.a.createElement(at,{displayedValues:e.map(({twoG:e,value:a})=>t.formatMessage({id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_VALUE_TX_POWER_MODE"},{twoG:String(!!e),value:a})),placeholderOnTop:e.every(({twoG:e})=>!e),placeholderCount:e.every(({twoG:e})=>e)||e.every(({twoG:e})=>!e)?1:0})}],[t]),p=Object(n.useCallback)(()=>a(null),[a]);return Object(n.useEffect)(()=>{null!==e&&(c.current=e)},[e]),void 0!==_?i.a.createElement(i.a.Fragment,null,i.a.createElement(qe.a,{isOpen:!!e,size:"large",title:i.a.createElement(he.g,{alignItems:"center"},i.a.createElement(rt,{size:"navigation"}),i.a.createElement("div",null,i.a.createElement(te.b,{date:s}))),onRequestClose:p,actions:["active"!==_&&{text:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_BUTTON_RESTORE"}),type:"button",onClick:()=>T(!0),variant:"secondary"},{text:i.a.createElement(r.c,{id:"COMMON_ACTION_CLOSE"}),type:"button",onClick:()=>a(null)}]},i.a.createElement(J.a,{columns:S,disableColumnFilters:!0,disableSelection:!0,disableTextPointer:!0,disableSort:!0,idField:"mac",items:I})),i.a.createElement(Ke.a,{isOpen:O,message:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_RESTORE_MESSAGE",messageValues:{dateTime:`${Object(L.format)(s,Je.a)} - ${Object(L.format)(s,m)}`},title:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_RESTORE_TITLE",onCancel:()=>T(!1),onConfirm:()=>{var t;d((t=e,async e=>{const{na:a,ng:n}=t.scans||{},i=e=>Object(h.a)(e,"_id",""),{failureToast:c,successToast:r}=Object(Qe.a)("SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_RESTORE_TOAST_ERROR","SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOG_DETAILS_RESTORE_TOAST_SUCCESS");try{const t=i(a);t&&await e(Object(A.restoreChannelPlan)(t));const c=i(n);c&&await e(Object(A.restoreChannelPlan)(c)),e(Object(u.c)(r))}catch(l){e(Object(u.c)(c(void 0,l)))}})),T(!1),a(null)}})):null});const ot=Object(z.c)(q.a)`
  padding-bottom: ${({theme:e})=>e.spacing["spacing-xxl"]};
`,st=Object(z.c)(K.a)`
  cursor: default !important;
`;var Et=()=>{const e=Object(l.useSelector)(ue),[t,a]=Object(n.useState)(null),c=Object(n.useMemo)(()=>[{compare:Object(ie.a)(({date:e})=>e),id:"optimization-logs-date",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOGS_TABLE_DATE"}),renderCell:({date:e})=>i.a.createElement("div",null,i.a.createElement(te.b,{date:e})),sortable:!0,minWidth:100},{compare:Object(ie.a)(({accessPoints:e})=>e),id:"optimization-logs-access-points",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOGS_TABLE_ACCESS_POINTS"}),renderCell:({accessPoints:e})=>e||"-",sortable:!0,minWidth:100,maxWidth:120},{compare:Object(ie.a)(({calculationTime:e})=>e),id:"optimization-logs-calculation-time",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOGS_TABLE_CALCULATION_TIME"}),renderCell:({calculationTime:e})=>e>1?Object(re.c)(Math.round(e)):"-",sortable:!0,minWidth:80,maxWidth:100},{compare:Object(ie.a)(({id:e,satisfaction:t})=>"active"===e?101:t),id:"optimization-logs-satisfaction",label:i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOGS_TABLE_SATISFACTION"}),renderCell:({change:e,id:t,satisfaction:a})=>"active"===t?i.a.createElement(Re.a,{message:i.a.createElement(K.a,null,i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOGS_TOOLTIP_ACTIVE"})),width:215},i.a.createElement(st,{color:"success"},i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOGS_VALUE_ACTIVE"}))):i.a.createElement(K.a,{color:e>0?"success":e<0?"danger":void 0,truncate:!0},a.toFixed(0),"% (",0===e?i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOGS_VALUE_NO_CHANGES"}):`${e>0?"+":""}${e.toFixed(0)}%`,")"),sortable:!0,minWidth:115,maxWidth:115},{compare:Object(ie.a)(({twoGChanges:e})=>e&&e.length?e.join(", "):"-"),id:"optimization-logs-two-g-changes",label:i.a.createElement(r.b,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOGS_TABLE_TWO_G_CHANGES"}),renderCell:({twoGChanges:e})=>e&&e.length?e.join(", "):"-",sortable:!0,minWidth:100},{compare:Object(ie.a)(({fiveGChanges:e})=>e&&e.length?e.join(", "):"-"),id:"optimization-logs-five-g-changes",label:i.a.createElement(r.b,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOGS_TABLE_FIVE_G_CHANGES"}),renderCell:({fiveGChanges:e})=>e&&e.length?e.join(", "):"-",sortable:!0,minWidth:100}],[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ot,{padding:"none"},i.a.createElement(oe,null,i.a.createElement(Ee,{marginBottom:"xl"},i.a.createElement(r.c,{id:"SETTINGS_WIFI_AI_FORM_OPTIMIZATION_LOGS_LABEL"})),i.a.createElement(J.a,{columns:c,disableSelection:!0,disableTextPointer:!0,items:e,onRowClick:e=>a(e)}))),i.a.createElement(lt,{activeOptimizationLogDetails:t,setActiveOptimizationLogDetails:a}))};var _t=()=>i.a.createElement(i.a.Fragment,null,i.a.createElement(Ze,null),i.a.createElement(xe,null),i.a.createElement(Et,null),i.a.createElement(Ae,null));var dt=({formValues:e})=>{const{status:t,resetForm:a}=Object(O.e)();return Object(n.useEffect)(()=>{t.isSubmitted&&a({values:e})},[e,a,t.isSubmitted]),Object(c.f)([Object(A.fetchChannelPlans)(void 0,{crudCacheStrategy:{type:S.a.COMBINED}}),Object(s.a)(void 0,{crudCacheStrategy:{type:S.a.CACHE}}),Object(T.fetchDevices)(void 0,{crudCacheStrategy:{type:S.a.CACHE}}),p(void 0,{crudCacheStrategy:{type:S.a.COMBINED}}),Object(_.fetchSettings)({type:S.a.CACHE})],i.a.createElement(_t,null))},mt=a(2166);var ut=({onBack:e})=>{const t=Object(l.useDispatch)(),a=Object(l.useSelector)(s.g),c=Object(l.useSelector)(s.h),O=Object(l.useSelector)(E.x),A=Object(l.useSelector)(_.selectNetworkOptimization),T=Object(l.useSelector)(_.selectRadioAiSettings),S=Object(l.useSelector)(E.O),p=Object(n.useMemo)(()=>({isSubmitted:!1}),[]),h=Object(n.useMemo)(()=>{const e=(e=>{const[t,a,n,i,c]=null==e?void 0:e.split(" ").map(e=>"*"!==e?parseInt(e,10):e);return{minute:t,hour:a,dayOfMonth:n,month:i,dayOfWeek:c}})((null==T?void 0:T.cron_expr)||d.radio_ai.cron_expr),t=e.hour>11?"pm":"am",n={uniFiAi:{enabled:!1},networkOptimize:{...d.network_optimization,...A},wiFiAi:{...d.radio_ai,channels_na:a,frequency:j((null==T?void 0:T.cron_expr)||d.radio_ai.cron_expr),amOrPm:t,...e,hour:v(e.hour,S),...T}};return{...n,wiFiAi:{...n.wiFiAi,excludedChannelsNg:c.map(e=>String(e)).filter(e=>!n.wiFiAi.channels_ng.some(t=>String(t)===e)),excludedChannelsNa:a.map(e=>String(e)).filter(e=>!n.wiFiAi.channels_na.some(t=>String(t)===e)),ht_modes_na:n.wiFiAi.ht_modes_na.map(e=>String(e)),ht_modes_ng:n.wiFiAi.ht_modes_ng.map(e=>String(e))}}},[a,c,T,A,S]),N=Object(n.useMemo)(()=>({component:i.a.createElement(r.c,{id:"SETTINGS_GENERAL_FORM_ACCORDION_ITEM_WI_FI_AI_LABEL"}),message:"general"}),[]),g=Object(n.useCallback)((e,{setStatus:n,setSubmitting:i})=>{const{wiFiAi:r,networkOptimize:l}=e,s=[];if(!Object(o.a)(r,h.wiFiAi)){const{frequency:n,excludedChannelsNg:i,excludedChannelsNa:l,minute:o,hour:E,dayOfMonth:d,month:m,dayOfWeek:u,amOrPm:I,...O}=r,A=n===b.DAILY?"*":u,T=((e,t,a)=>"string"==typeof e||t?e:"pm"===a?e+12:e)(E,S,I),p=Object(mt.c)(o,T,d,m,A),h=c.filter(t=>!e.wiFiAi.excludedChannelsNg.some(e=>e===String(t))),N={...O,cron_expr:p,channels_na:a.filter(t=>!e.wiFiAi.excludedChannelsNa.some(e=>e===String(t))),channels_ng:h};s.push(t(Object(_.saveSettings)({key:"radio_ai",default:!1,...N})))}return Object(o.a)(l,h.networkOptimize)||s.push(t(Object(_.saveSettings)({key:"network_optimization",...l}))),Promise.all(s).then(()=>{t(Object(u.c)({icon:I.a.success,message:"SETTINGS_GENERAL_FORM_TOAST_SAVE_SUCCESS"})),n({isSubmitted:!0})}).catch(e=>{t(Object(u.c)({errorMessage:e.msg,errorValues:e,icon:I.a.danger,message:"SETTINGS_GENERAL_FORM_TOAST_SAVE_ERROR"})),i(!1)})},[a,c,t,h.wiFiAi,h.networkOptimize,S]);return i.a.createElement(m.b,{goBack:e,hideClose:!0,initialStatus:p,initialValues:h,isEdit:!O,isView:O,showBack:!0,title:N,validationSchema:void 0,onEscClicked:e,onSubmit:g},i.a.createElement(dt,{formValues:h}))};t.default=()=>{const e=Object(c.h)();return i.a.createElement(ut,{onBack:e})}},1929:function(e,t,a){"use strict";var n=a(0),i=a.n(n),c=a(5),r=a(2),l=a(1946),o=a.n(l),s=a(1741),E=a(520),_=a(521);const d=Object(c.c)("span")`
  line-height: 1.5;
  margin-top: ${({theme:e})=>e.spacing["spacing-xxxxl"]};
`;t.a=({when:e,ignoredPaths:t=null,onLeave:a=null,onStay:c=null})=>{const l=Object(n.useMemo)(()=>({overlay:{"--modal-z-index":2e3}}),[]),m=Object(_.a)(t),u=Object(n.useCallback)((e,t)=>t.pathname!==e.pathname,[]),I=Object(n.useCallback)(e=>(e={},t={})=>m(e,t)&&u(e,t),[m,u]);return!!e&&i.a.createElement(o.a,{when:I(t)},({onCancel:e,onConfirm:t})=>i.a.createElement(s.a,{actions:[{type:"button",text:i.a.createElement(r.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_STAY"}),onClick:()=>c?c(e):e()},{type:"button",text:i.a.createElement(r.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_LEAVE"}),onClick:()=>a?a(t):t(),variant:"primary"}],isOpen:!0,size:"small",style:l,parentSelector:E.b,title:i.a.createElement(r.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_TITLE"}),onRequestClose:()=>c?c(e):e()},i.a.createElement(d,null,i.a.createElement(r.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_CONTENT"}))))}},1930:function(e,t,a){"use strict";var n=a(0),i=a(36);t.a=()=>{const e=Object(i.l)(),[t]=Object(n.useState)(e.pathname),[a,c]=Object(n.useState)(!1),r=Object(n.useRef)();return Object(n.useEffect)(()=>{c(!1);const a=/^(.*)\/[a-z0-9]*/i.exec(t),n=/^(.*)\/[a-z0-9]*/i.exec(e.pathname);return a[0].length===n[0].length&&a[1]===n[1]&&(r.current=setTimeout(()=>c(!0),500)),()=>clearTimeout(r.current)},[e.pathname,t]),a}},1938:function(e,t,a){"use strict";a.d(t,"b",(function(){return G})),a.d(t,"a",(function(){return F}));var n=a(0),i=a.n(n),c=a(5),r=a(2),l=a(44),o=a(2847),s=a(2658),E=a(1929),_=a(783),d=a(71),m=a(1940),u=a(15),I=a(32),O=a(42),A=a(1847),T=a(782),S=a(1930);const p=c.a`
  &-appear,
  &-enter {
    opacity: 0;
    transform: translateX(15px);
  }
  &-appear-active,
  &-enter-active,
  &-appear-done,
  &-enter-done {
    opacity: 1;
    transform: translateX(0);
    transition: opacity 150ms cubic-bezier(0.25, 0.1, 0.25, 1) 130ms,
      transform 300ms cubic-bezier(0.25, 0.1, 0.25, 1.4) 130ms;
  }
  &-exit {
    opacity: 1;
    transform: translateX(0);
  }
  &-exit-active,
  &-exit-done {
    opacity: 0;
    transform: translateX(15px);
    transition: opacity 100ms linear, transform 100ms linear;
  }
`;var b=({timeout:e={enter:300,exit:100},in:t,children:a,ignoredPaths:c,...r})=>{const l=Object(S.a)(),o=Object(T.a)(c),s=Object(n.useMemo)(()=>i.a.Children.map(a,a=>null===a?a:i.a.createElement(A.a,Object.assign({appear:t||!o||l,in:t||!o||l,timeout:e,classNames:p,mountOnEnter:!0},r),a)),[a,t,o,l,e,r]);return i.a.createElement(i.a.Fragment,null,s)};const h=c.a`
  &-appear,
  &-enter {
    border-bottom: transparent !important;
  }
  &-appear-active,
  &-enter-active,
  &-appear-done,
  &-enter-done {
    transition: border-bottom 150ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  &-exit {
    opacity: 1;
  }
  &-exit-active,
  &-exit-done {
    opacity: 0;
    transition: opacity 100ms linear;
  }
`;var N=({timeout:e={enter:150,exit:100},in:t,children:a,ignoredPaths:c,...r})=>{const l=Object(S.a)(),o=Object(T.a)(c),s=Object(n.useMemo)(()=>i.a.Children.map(a,a=>null===a?a:i.a.createElement(A.a,Object.assign({appear:t||!o||l,in:t||!o||l,timeout:e,classNames:h,mountOnEnter:!0},r),a)),[a,t,o,l,e,r]);return i.a.createElement(i.a.Fragment,null,s)};const g=Object(c.c)(d.g)`
  > * {
    /* Use margin on child rather than padding on self not to occupy space when no button is shown */
    margin-left: ${({theme:e})=>e.spacing["spacing-xxl"]};
    margin-right: ${({theme:e})=>e.spacing["spacing-xxl"]};
  }
`,C=Object(c.c)(d.g)`
  border-bottom: 1px solid ${({theme:e})=>e.motifPalette.ui03};
`,f=Object(c.c)("h1")`
  font-size: 16px;
  font-weight: normal;
`,D=Object(c.c)(d.c)`
  padding: ${({theme:e})=>e.spacing["spacing-s"]};
`,L=Object(c.c)(I.a)`
  color: ${({theme:e})=>e.motifPalette.text01} !important;
  font-size: 16px !important;
`;var F=({title:e,showBack:t,goBack:a,onEscClicked:n,hideClose:c,ignoredPaths:r})=>{const{motif:l}=Object(O.a)();return i.a.createElement(N,{ignoredPaths:r},i.a.createElement(C,{flex:"none",height:"65px"},i.a.createElement(b,{ignoredPaths:r},i.a.createElement(d.g,{alignItems:"center",flex:"1",justifyContent:"space-between"},i.a.createElement(g,{alignItems:"center",flex:"1",height:"100%"},t&&i.a.createElement(D,{legacy:!1,name:"backButton",type:"button",onClick:a,motif:l},i.a.createElement(u.f,{size:"original"}))),i.a.createElement(f,null,i.a.createElement(L,{weight:"bold"},e.component)),i.a.createElement(g,{alignItems:"center",flex:"1",height:"100%",justifyContent:"flex-end"},!c&&i.a.createElement(D,{legacy:!1,name:"closeButton",type:"button",onClick:n},i.a.createElement(u.y,{size:"original"})))))))};const M=Object(c.c)(d.g)`
  width: 100%;
  max-width: ${_.a};
  margin: 0 auto;
  padding: ${({theme:e})=>e.spacing["spacing-xxxxl"]}
    ${({theme:e})=>2*parseInt(e.spacing["spacing-xxxxl"],10)}px;
`,j=Object(c.c)("form")`
  display: flex;
  flex: 1;
  overflow: hidden;
  width: 100%;
  height: 100%;
`,v=Object(c.c)(d.g)`
  @media (max-width: 1010px) {
    flex-direction: column;
  }
`,w=Object(c.c)(o.a)`
  transition: height 100ms ease, transform 100ms ease; /* TODO: Remove with next ui-components update (v25.1.1 +)  */
  > :first-child {
    max-width: ${_.a};
    padding-left: ${({theme:e})=>2*parseInt(e.spacing["spacing-xxxxl"],10)}px !important;
    padding-right: ${({theme:e})=>2*parseInt(e.spacing["spacing-xxxxl"],10)}px !important;
    position: relative;
    margin: 0 auto;
  }
`,x=Object(c.c)(d.h)`
  background: transparent;
  overflow: scroll !important;
  margin-right: -${({theme:e})=>e.scrollBarWidth}px;
`,R=Object(c.c)(d.k)`
  height: 100%;
  width: 100%;
`;var G=({children:e,disableUnsavedChangesModal:t,goBack:a,hideClose:n,isEdit:c,isView:o,showBack:_,title:u,unsavedChangesModalIgnoredPaths:I,onEscClicked:O,submitText:A="COMMON_ACTION_APPLY_CHANGES",footerActiveOverride:T=!1,customFooterButtons:S,hidddenHeader:p,...b})=>i.a.createElement(l.c,Object.assign({enableReinitialize:!0},b),({dirty:c,handleReset:l,handleSubmit:b,isSubmitting:h})=>i.a.createElement(j,{autoComplete:"off",onSubmit:b},i.a.createElement(R,{vertical:!0},!p&&i.a.createElement(F,{goBack:a,hideClose:n,showBack:_,title:u,onEscClicked:O,ignoredPaths:I}),i.a.createElement(m.a,{ignoredPaths:I},i.a.createElement(x,{flex:"1"},i.a.createElement(M,{flex:"none",flexDirection:"column"},e))),!t&&!o&&i.a.createElement(E.a,{ignoredPaths:I,when:c&&!h}),(!o||T)&&i.a.createElement(w,{active:c||T},i.a.createElement(d.g,{justifyContent:S?"space-between":"flex-end",width:"100%",alignItems:"center"},S&&i.a.createElement(v,null,S(h)),!o&&i.a.createElement(d.g,null,i.a.createElement(s.a,{disabled:!c||h,type:"button",variant:"default",onClick:l},i.a.createElement(r.c,{id:"COMMON_ACTION_CANCEL"})),i.a.createElement(s.a,{disabled:!c||h,type:"submit",variant:"primary"},i.a.createElement(r.c,{id:A}))))))))},1940:function(e,t,a){"use strict";var n=a(0),i=a.n(n),c=a(1847),r=a(5),l=a(782),o=a(1930);const s=r.a`
  &-appear,
  &-enter {
    opacity: 0;
    transform: translateX(60px);
  }
  &-appear-active,
  &-enter-active {
    opacity: 1;
    transform: translateX(0);
    transition: opacity 150ms cubic-bezier(0.25, 0.1, 0.25, 1), transform 300ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  &-exit {
    opacity: 1;
    transform: translateX(0);
  }
  &-exit-active,
  &-exit-done {
    opacity: 0;
    transform: translateX(60px);
    transition: opacity 100ms cubic-bezier(0.25, 0.1, 0.25, 1), transform 100ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }
`;t.a=({timeout:e={enter:300,exit:100},in:t,ignoredPaths:a,children:r,...E})=>{const _=Object(o.a)(),d=Object(l.a)(a),m=Object(n.useMemo)(()=>i.a.Children.map(r,a=>null===a?a:i.a.createElement(c.a,Object.assign({appear:t||!d||_,in:t||!d||_,timeout:e,classNames:s,mountOnEnter:!0},E),a)),[r,t,d,_,e,E]);return i.a.createElement(i.a.Fragment,null,m)}},2080:function(e,t,a){"use strict";var n,i,c,r,l;a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return l})),function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=0]="MONDAY",e[e.TUESTDAY=0]="TUESTDAY",e[e.WEDNESDAY=0]="WEDNESDAY",e[e.THURSDAY=0]="THURSDAY",e[e.FRIDAY=0]="FRIDAY",e[e.SATURDAY=0]="SATURDAY"}(n||(n={})),function(e){e[e.JANUARY=1]="JANUARY",e[e.FEBRYARY=2]="FEBRYARY",e[e.MARCH=3]="MARCH",e[e.APRIL=4]="APRIL",e[e.MAY=5]="MAY",e[e.JUNE=6]="JUNE",e[e.JULY=7]="JULY",e[e.AUGUST=8]="AUGUST",e[e.SEPTEMBER=9]="SEPTEMBER",e[e.OCTOBER=10]="OCTOBER",e[e.NOVEMBER=11]="NOVEMBER",e[e.DECEMBER=12]="DECEMBER"}(i||(i={})),function(e){e.NEVER="Never",e.DAILY="Daily",e.WEEKLY="Weekly",e.MONTHLY="Monthly",e.ADVANCED="Advanced"}(c||(c={})),function(e){e.DAY="Day",e.WEEK="Week",e.MONTH="Month",e.YEAR="Year"}(r||(r={})),function(e){e.Hour="Hourly",e.Day="Daily",e.Week="Weekly",e.Month="Monthly",e.Year="Yearly"}(l||(l={}))},2104:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"e",(function(){return u})),a.d(t,"g",(function(){return I})),a.d(t,"f",(function(){return O})),a.d(t,"b",(function(){return A})),a.d(t,"c",(function(){return T})),a.d(t,"d",(function(){return S}));var n=a(0),i=a.n(n),c=a(2),r=a(32),l=a(764),o=a(30),s=a(117),E=a(61),_=a(46),d=a(2080);const m={name:"",execute_only_once:!1,cron_expr:"",upgrade_targets:[],dayInMonth:1,repeat:d.c.NEVER,repeatEveryCount:1,repeatEveryPeriod:d.a.DAY,startTime:0,weekDays:[]},u="schedule-upgrades",I=o.a.object().shape({name:o.a.string().label("SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_NAME").required(),upgrade_targets:o.a.array().of(o.a.string()).label("SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_TARGET_DEVICES").min(1).required(),startTime:o.a.number().label("SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_START_TIME").required(),repeat:o.a.string().label("SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_REPEATS").oneOf(Object.values(d.c)).required(),repeatEveryPeriod:o.a.string().when("repeat",{is:e=>e===d.c.ADVANCED,then:o.a.string().oneOf(Object.values(d.a)).required()}),repeatEveryCount:o.a.number().when(["repeat","repeatEveryPeriod"],(e,t)=>{if(e===d.c.ADVANCED)switch(t){case d.a.DAY:return o.a.number().label("SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_REPEAT_EVERY").min(1).max(31).required();case d.a.WEEK:return o.a.number().label("SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_REPEAT_EVERY").min(1).max(2).required();case d.a.MONTH:return o.a.number().label("SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_REPEAT_EVERY").min(1).max(12).required()}return o.a.number()}),dayInMonth:o.a.number().when(["repeat","repeatEveryPeriod"],{is:(e,t)=>e===d.c.MONTHLY||e===d.c.ADVANCED&&t===d.a.MONTH,then:o.a.number().label("SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_REPEAT_ON_DAY_OF_MONTH").min(1).max(31).required()}),weekDays:o.a.array().of(o.a.number()).when(["repeat","repeatEveryPeriod"],{is:(e,t)=>e===d.c.WEEKLY||e===d.c.ADVANCED&&t===d.a.WEEK,then:o.a.array().of(o.a.number()).min(1,"SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_VALIDATION_WEEK_DAYS_MIN").required()})}),O=[{compare:Object(E.a)(e=>Object(_.c)(e)),id:"icon",minWidth:32,renderCell:e=>i.a.createElement(s.c,{device:e}),renderLabel:()=>null},{compare:Object(E.a)(e=>Object(_.c)(e)),id:"name",minWidth:100,label:i.a.createElement(c.c,{id:"SETTINGS_DEVICE_SELECTOR_HEADER_NAME"}),renderCell:e=>i.a.createElement(r.a,{color:"tertiary",truncate:!0},Object(_.c)(e)),sortable:!0},{compare:Object(E.a)(e=>Object(_.a)(e)),id:"model",minWidth:130,label:i.a.createElement(c.c,{id:"SETTINGS_DEVICE_SELECTOR_HEADER_MODEL"}),renderCell:e=>i.a.createElement(r.a,{color:"tertiary",truncate:!0},Object(_.a)(e)),sortable:!0}],A=e=>Object(l.a)(0,24).map(t=>Object(l.a)(4).map(a=>{const n=String(15*a).padStart(2,"0");return{label:`${String(e?t:t%12||12).padStart(2,"0")}:${n}${e?"":""+(t>=12?"pm":"am")}`,value:60*t+ +n}})).flat(),T=Object.entries(d.c).map(([e,t])=>({label:"SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_REPEAT_"+e,value:t})),S=[{label:"SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_REPEAT_DAY",value:d.a.DAY},{label:"SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_REPEAT_WEEK",value:d.a.WEEK},{label:"SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_REPEAT_MONTH",value:d.a.MONTH},{label:"SETTINGS_SYSTEM_MAINTENANCE_UPDATE_FORM_SCHEDULED_LABEL_REPEAT_YEAR",value:d.a.YEAR}]},2166:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return o}));var n=a(764),i=a(2104),c=a(2080);const r=(e,t)=>{let{dayInMonth:a,repeat:n,repeatEveryCount:r,repeatEveryPeriod:l,startTime:o,weekDays:s}=i.a;const[E,_,d,m,u]=null==e?void 0:e.split(" ");if(E&&_&&(o=60*(Number(_)||0)+(Number(E)||0)),!t)if(1==+d&&1==+m)n=c.c.ADVANCED,l=c.a.YEAR;else if("*"!==d)if("*"!==u)n=c.c.ADVANCED,r=2,l=c.a.WEEK,s=u.split(",").map(Number);else if("*"!==m){n=c.c.ADVANCED,l=c.a.MONTH;const e=m.split(",");r=+e[1]-+e[0]||1}else{const e=d.split(",");e.length>1?(n=c.c.ADVANCED,l=c.a.DAY,r=+e[1]-+e[0]||1):(n=c.c.MONTHLY,a=+d)}else"*"!==u?("*"!==d?(n=c.c.ADVANCED,r=2,l=c.a.WEEK):n=c.c.WEEKLY,s=u.split(",").map(Number)):n=c.c.DAILY;return{dayInMonth:a,repeat:n,repeatEveryCount:r,repeatEveryPeriod:l,startTime:o,weekDays:s}},l=(...e)=>e.map(e=>null!=e?e:"*").join(" "),o=({dayInMonth:e,repeat:t,repeatEveryCount:a,repeatEveryPeriod:i,startTime:r,weekDays:o})=>{const s=Math.floor(r/60),E=r%60;let _,d,m;switch(t){case c.c.NEVER:case c.c.DAILY:break;case c.c.WEEKLY:m=o.join(",");break;case c.c.MONTHLY:_=e;break;case c.c.ADVANCED:switch(i){case c.a.DAY:1!=+a&&(_=Object(n.a)(1,32,a).join(","));break;case c.a.WEEK:2==+a&&(_="1-7,15-21"),m=o.join(",");break;case c.a.MONTH:_=e,1!=+a&&(d=Object(n.a)(1,12,a).join(","));break;case c.a.YEAR:_=1,d=1}}return l(E,s,_,d,m)}}}]);